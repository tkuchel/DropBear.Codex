/* responsive-modern.css - Modern responsive patterns for .NET 9 Blazor */
/* Complements existing layout.css with modern CSS Grid, Flexbox, and Container Queries */

/* ============================================
   MODERN CSS GRID LAYOUTS
   ============================================ */

/* Auto-fit grid (cards, thumbnails, etc.) */
.grid-auto-fit {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
  gap: var(--space-4, 1rem);
}

/* Auto-fill grid (for fixed-size items) */
.grid-auto-fill {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(min(200px, 100%), 1fr));
  gap: var(--space-4, 1rem);
}

/* Responsive grid system using CSS Grid */
.grid {
  display: grid;
  gap: var(--space-4, 1rem);
}

/* 2-column responsive grid */
.grid-2 {
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-2 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* 3-column responsive grid */
.grid-3 {
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-3 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .grid-3 {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* 4-column responsive grid */
.grid-4 {
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .grid-4 {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .grid-4 {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Dashboard layout (sidebar + main content) */
.layout-dashboard {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-4, 1rem);
  min-height: 100vh;
}

@media (min-width: 768px) {
  .layout-dashboard {
    grid-template-columns: 250px 1fr;
  }
}

@media (min-width: 1024px) {
  .layout-dashboard {
    grid-template-columns: 280px 1fr;
  }
}

/* Holy Grail layout (header, nav, main, aside, footer) */
.layout-holy-grail {
  display: grid;
  grid-template-areas:
    "header"
    "nav"
    "main"
    "aside"
    "footer";
  grid-template-columns: 1fr;
  grid-template-rows: auto auto 1fr auto auto;
  min-height: 100vh;
  gap: var(--space-4, 1rem);
}

@media (min-width: 768px) {
  .layout-holy-grail {
    grid-template-areas:
      "header header header"
      "nav    main   aside"
      "footer footer footer";
    grid-template-columns: 200px 1fr 200px;
    grid-template-rows: auto 1fr auto;
  }
}

.layout-holy-grail > .header {
  grid-area: header;
}

.layout-holy-grail > .nav {
  grid-area: nav;
}

.layout-holy-grail > .main {
  grid-area: main;
}

.layout-holy-grail > .aside {
  grid-area: aside;
}

.layout-holy-grail > .footer {
  grid-area: footer;
}

/* ============================================
   MODERN FLEXBOX PATTERNS
   ============================================ */

/* Stack layout (vertical spacing) */
.stack {
  display: flex;
  flex-direction: column;
}

.stack > * + * {
  margin-top: var(--space-4, 1rem);
}

.stack-sm > * + * {
  margin-top: var(--space-2, 0.5rem);
}

.stack-lg > * + * {
  margin-top: var(--space-8, 2rem);
}

/* Cluster layout (horizontal grouping with wrapping) */
.cluster {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4, 1rem);
  align-items: center;
}

.cluster-start {
  justify-content: flex-start;
}

.cluster-center {
  justify-content: center;
}

.cluster-end {
  justify-content: flex-end;
}

.cluster-between {
  justify-content: space-between;
}

/* Sidebar layout (flexible sidebar + main) */
.sidebar-layout {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4, 1rem);
}

.sidebar-layout > .sidebar {
  flex-basis: 250px;
  flex-grow: 1;
}

.sidebar-layout > .main {
  flex-basis: 0;
  flex-grow: 999;
  min-inline-size: 50%;
}

/* Switcher layout (switches between horizontal and stacked) */
.switcher {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-4, 1rem);
}

.switcher > * {
  flex-grow: 1;
  flex-basis: calc((30rem - 100%) * 999);
}

/* Center layout (centered with max-width) */
.center {
  box-sizing: content-box;
  margin-inline: auto;
  max-inline-size: var(--measure, 65ch);
  padding-inline: var(--space-4, 1rem);
}

/* ============================================
   RESPONSIVE DATA GRID ENHANCEMENTS
   ============================================ */

/* Make data grids responsive on mobile */
.dropbear-datagrid-container {
  container-type: inline-size;
  container-name: datagrid;
}

/* Stack datagrid vertically on small screens */
@container datagrid (max-width: 640px) {
  .datagrid-table {
    display: block;
  }

  .datagrid-table thead {
    display: none;
  }

  .datagrid-table tbody,
  .datagrid-table tr,
  .datagrid-table td {
    display: block;
    width: 100%;
  }

  .datagrid-table tr {
    margin-bottom: var(--space-4, 1rem);
    border: 1px solid var(--clr-border, #ddd);
    border-radius: var(--radius-md, 0.375rem);
    padding: var(--space-3, 0.75rem);
  }

  .datagrid-table td {
    text-align: right;
    padding: var(--space-2, 0.5rem);
    position: relative;
    border: none;
  }

  .datagrid-table td::before {
    content: attr(data-label);
    position: absolute;
    left: var(--space-2, 0.5rem);
    font-weight: var(--fw-semibold, 600);
    text-align: left;
  }

  .datagrid-cell-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-2, 0.5rem);
  }
}

/* Medium screens - show more columns */
@container datagrid (min-width: 640px) and (max-width: 1024px) {
  .datagrid-table {
    font-size: var(--text-sm, 0.875rem);
  }

  .datagrid-cell {
    padding: var(--space-2, 0.5rem);
  }
}

/* ============================================
   RESPONSIVE SELECTION PANEL
   ============================================ */

.dropbear-selection-panel {
  container-type: inline-size;
  container-name: selection-panel;
}

/* Stack selection items vertically on small containers */
@container selection-panel (max-width: 400px) {
  .selection-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2, 0.5rem);
  }

  .selection-item {
    flex-direction: column;
    align-items: flex-start;
  }

  .selection-actions {
    flex-direction: column;
    width: 100%;
  }

  .action-button {
    width: 100%;
  }
}

/* ============================================
   RESPONSIVE MODAL
   ============================================ */

.modal-content {
  max-width: min(90vw, 600px);
  max-height: 90vh;
  overflow-y: auto;
  margin: auto;
}

/* Full-width modal on mobile */
@media (max-width: 640px) {
  .modal-content {
    max-width: 95vw;
    max-height: 95vh;
    border-radius: var(--radius-lg, 0.5rem);
  }
}

/* Medium modal on tablets */
@media (min-width: 640px) and (max-width: 1024px) {
  .modal-content {
    max-width: 80vw;
  }
}

/* ============================================
   RESPONSIVE UTILITIES
   ============================================ */

/* Visibility utilities */
.hidden-mobile {
  display: none;
}

@media (min-width: 640px) {
  .hidden-mobile {
    display: block;
  }
}

.visible-mobile {
  display: block;
}

@media (min-width: 640px) {
  .visible-mobile {
    display: none;
  }
}

/* Responsive text alignment */
.text-center-mobile {
  text-align: center;
}

@media (min-width: 640px) {
  .text-center-mobile {
    text-align: left;
  }
}

/* Responsive padding */
.p-responsive {
  padding: var(--space-4, 1rem);
}

@media (min-width: 640px) {
  .p-responsive {
    padding: var(--space-6, 1.5rem);
  }
}

@media (min-width: 1024px) {
  .p-responsive {
    padding: var(--space-8, 2rem);
  }
}

/* ============================================
   CARD LAYOUTS
   ============================================ */

.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(min(300px, 100%), 1fr));
  gap: var(--space-4, 1rem);
}

.card {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--clr-border, #ddd);
  border-radius: var(--radius-lg, 0.5rem);
  overflow: hidden;
  background: var(--clr-surface-primary, #fff);
  box-shadow: var(--shadow-sm);
  transition: var(--transition-all);
}

.card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
}

.card-header {
  padding: var(--space-4, 1rem);
  border-bottom: 1px solid var(--clr-border, #ddd);
}

.card-body {
  padding: var(--space-4, 1rem);
  flex: 1;
}

.card-footer {
  padding: var(--space-4, 1rem);
  border-top: 1px solid var(--clr-border, #ddd);
  background: var(--clr-surface-secondary, #f8f9fa);
}

/* ============================================
   ASPECT RATIO (for images, videos, iframes)
   ============================================ */

.aspect-ratio {
  position: relative;
  width: 100%;
}

.aspect-ratio::before {
  content: "";
  display: block;
  padding-bottom: var(--aspect-ratio, 56.25%); /* 16:9 default */
}

.aspect-ratio > * {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.aspect-ratio-square {
  --aspect-ratio: 100%; /* 1:1 */
}

.aspect-ratio-video {
  --aspect-ratio: 56.25%; /* 16:9 */
}

.aspect-ratio-cinema {
  --aspect-ratio: 42.857%; /* 21:9 */
}

/* ============================================
   RESPONSIVE IMAGES
   ============================================ */

img {
  max-width: 100%;
  height: auto;
  display: block;
}

.img-fluid {
  max-width: 100%;
  height: auto;
}

.img-responsive {
  width: 100%;
  height: auto;
  object-fit: cover;
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
  .hidden-print,
  .modal-overlay,
  .dropbear-snackbar,
  .dropbear-context-menu {
    display: none !important;
  }

  .dropbear-datagrid-container {
    overflow: visible;
  }

  .datagrid-table {
    border-collapse: collapse;
    width: 100%;
  }

  .datagrid-cell {
    border: 1px solid #000;
    padding: 0.25rem;
  }

  /* Prevent page breaks inside elements */
  tr,
  .card,
  .selection-item {
    page-break-inside: avoid;
  }

  /* Always break before h2-h4 */
  h2,
  h3,
  h4 {
    page-break-after: avoid;
  }
}
