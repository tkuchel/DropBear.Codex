@using DropBear.Codex.Blazor.Enums
@using DropBear.Codex.Blazor.Models
@inherits DropBear.Codex.Blazor.Components.Bases.DropBearComponentBase

<div class="progress-step @GetPositionClass() @GetCompactClass()"
     data-status="@GetStatusAttribute()"
     data-variant="@Variant.ToString().ToLowerInvariant()"
     role="progressbar"
     aria-valuemin="0"
     aria-valuemax="100"
     aria-valuenow="@Progress"
     aria-label="@Config.Name">

    <div class="step-content">
        <!-- Step Icon and Title -->
        <div class="step-header">
            <div class="step-icon" aria-hidden="true">
                @GetStatusIcon()
            </div>

            <div class="step-info">
                <h4 class="step-title">@Config.Name</h4>

                @if (!CompactMode && !string.IsNullOrEmpty(Config.Description))
                {
                    <p class="step-description">@Config.Description</p>
                }
            </div>

            @if (!CompactMode)
            {
                <div class="step-progress-text">
                    @($"{Progress:F0}%")
                </div>
            }
        </div>

        <!-- Step Progress Bar -->
        @if (ShowProgressBar)
        {
            <div class="step-progress-track">
                <div class="step-progress-fill" style="@GetProgressStyle()">
                    @if (Status == StepStatus.InProgress && ShowPulseAnimation)
                    {
                        <div class="progress-pulse"></div>
                    }
                </div>
            </div>
        }

        <!-- Step Status Message -->
        @if (!CompactMode && !string.IsNullOrEmpty(GetStatusMessage()))
        {
            <div class="step-status-message">
                <span>@GetStatusMessage()</span>
                @if (ShowDuration && Status != StepStatus.NotStarted)
                {
                    <span class="step-duration">@FormatDuration()</span>
                }
            </div>
        }
    </div>

    @if (!CompactMode && Position == StepPosition.Current && Status == StepStatus.InProgress)
    {
        <div class="step-indicator" aria-hidden="true"></div>
    }
</div>
