@namespace DropBear.Codex.Blazor.Components.Notifications
@using DropBear.Codex.Blazor.Interfaces
@using DropBear.Codex.Notifications.Models
@using MessagePipe
@inherits DropBear.Codex.Blazor.Components.Bases.DropBearComponentBase
@inject ISnackbarService SnackbarService
@inject IAsyncSubscriber<string, Notification> NotificationSubscriber

<div class="@GetContainerClasses()"
     id="@ComponentId"
     role="alert"
     aria-live="polite"
     data-component-type="snackbar-container">
    @foreach (var snackbar in _activeSnackbars)
    {
        <DropBearSnackbar @key="snackbar.Id"
                          SnackbarInstance="snackbar"
                          OnClose="@(() => RemoveSnackbar(snackbar.Id))"/>
    }
</div>

@code {
    private string GetContainerClasses()
    {
        var classes = new List<string>
        {
            "dropbear-snackbar-container",
            GetPositionClass()
        };

        return string.Join(" ", classes);
    }
}
